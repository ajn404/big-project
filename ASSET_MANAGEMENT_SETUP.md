# èµ„æºç®¡ç†ç³»ç»Ÿ - å®Œæ•´å®ç°

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

å·²æˆåŠŸå®ç°å®Œæ•´çš„èµ„æºç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

### ğŸ“± å‰ç«¯åŠŸèƒ½
- **èµ„æºç®¡ç†é¡µé¢** (`/asset-manage`) - å®Œæ•´çš„æ–‡ä»¶åº“ç•Œé¢
- **æ‹–æ‹½ä¸Šä¼ ** - æ”¯æŒæ‰¹é‡æ–‡ä»¶ä¸Šä¼ 
- **èµ„æºé€‰æ‹©å™¨** - MDXç¼–è¾‘å™¨é›†æˆçš„å›¾ç‰‡é€‰æ‹©
- **å›¾ç‰‡ç¼–è¾‘å™¨** - æ—‹è½¬ã€ç¿»è½¬ã€äº®åº¦/å¯¹æ¯”åº¦è°ƒæ•´
- **å®æ—¶é¢„è§ˆ** - å›¾ç‰‡ç¼©ç•¥å›¾å’Œæ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º

### ğŸ”§ åç«¯åŠŸèƒ½  
- **GraphQL API** - å®Œæ•´çš„èµ„æºCRUDæ“ä½œ
- **æ–‡ä»¶ä¸Šä¼ ** - æ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹ï¼ˆå›¾ç‰‡ã€æ–‡æ¡£ã€éŸ³é¢‘ã€è§†é¢‘ï¼‰
- **é™æ€æ–‡ä»¶æœåŠ¡** - è‡ªåŠ¨å¤„ç†æ–‡ä»¶è®¿é—®
- **æ•°æ®åº“å­˜å‚¨** - å®Œæ•´çš„èµ„æºå…ƒæ•°æ®ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…ä¾èµ–
pnpm install

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# 3. è®¿é—®èµ„æºç®¡ç†é¡µé¢
open http://localhost:3000/asset-manage
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„

### åç«¯æ–‡ä»¶
```
apps/backend/src/
â”œâ”€â”€ asset/
â”‚   â”œâ”€â”€ asset.service.ts       # èµ„æºä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ asset.resolver.ts      # GraphQLè§£æå™¨
â”‚   â”œâ”€â”€ asset.controller.ts    # RESTæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ asset.module.ts        # æ¨¡å—é…ç½®
â”‚   â””â”€â”€ dto/                   # æ•°æ®ä¼ è¾“å¯¹è±¡
â””â”€â”€ database/entities/
    â””â”€â”€ asset.entity.ts        # èµ„æºæ•°æ®æ¨¡å‹
```

### å‰ç«¯æ–‡ä»¶
```
apps/frontend/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ asset-manager.tsx           # ä¸»èµ„æºç®¡ç†ç•Œé¢
â”‚   â”œâ”€â”€ asset-upload.tsx           # æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
â”‚   â”œâ”€â”€ asset-selector-dialog.tsx  # èµ„æºé€‰æ‹©å¼¹çª—
â”‚   â”œâ”€â”€ image-editor.tsx           # å›¾ç‰‡ç¼–è¾‘å™¨
â”‚   â””â”€â”€ enhanced-mdx-editor.tsx    # é›†æˆèµ„æºé€‰æ‹©çš„ç¼–è¾‘å™¨
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ asset-manage.tsx           # èµ„æºç®¡ç†é¡µé¢
â”œâ”€â”€ types/
â”‚   â””â”€â”€ asset.ts                   # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ lib/graphql/
    â””â”€â”€ asset-queries.ts           # GraphQLæŸ¥è¯¢
```

## ğŸ”— é›†æˆè¯´æ˜

### MDXç¼–è¾‘å™¨é›†æˆ
åœ¨MDXç¼–è¾‘å™¨ä¸­ç‚¹å‡»å›¾ç‰‡æŒ‰é’®(ğŸ“·)ï¼Œä¼šæ‰“å¼€èµ„æºåº“å¼¹çª—ï¼Œé€‰æ‹©å›¾ç‰‡åè‡ªåŠ¨æ’å…¥åˆ°ç¼–è¾‘å™¨ä¸­ï¼š

```markdown
![å›¾ç‰‡æè¿°](https://your-domain.com/uploads/image.jpg)
```

### APIä½¿ç”¨ç¤ºä¾‹

#### GraphQLæŸ¥è¯¢
```graphql
# è·å–æ‰€æœ‰å›¾ç‰‡èµ„æº
query GetImages {
  assets(type: IMAGE) {
    id
    name
    url
    alt
    size
    createdAt
  }
}

# ä¸Šä¼ æ–‡ä»¶
mutation UploadAsset($file: Upload!, $input: CreateAssetInput) {
  uploadAsset(file: $file, input: $input) {
    id
    name
    url
    type
  }
}
```

#### REST API
```bash
# ä¸Šä¼ æ–‡ä»¶
curl -X POST http://localhost:3001/api/assets/upload \
  -F "file=@image.jpg" \
  -F "description=æµ‹è¯•å›¾ç‰‡"

# ä¸‹è½½æ–‡ä»¶
curl http://localhost:3001/api/assets/download/{asset-id}
```

## ğŸ›  é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
# .env
UPLOAD_DIR=uploads                    # ä¸Šä¼ ç›®å½•
MAX_FILE_SIZE=10485760               # æœ€å¤§æ–‡ä»¶å¤§å° (10MB)
ALLOWED_FILE_TYPES=image/*,application/pdf
```

### æ”¯æŒçš„æ–‡ä»¶ç±»å‹
- **å›¾ç‰‡**: JPG, PNG, GIF, WebP, SVG
- **æ–‡æ¡£**: PDF, DOC, DOCX, TXT
- **éŸ³é¢‘**: MP3, WAV, OGG
- **è§†é¢‘**: MP4, WebM, AVI

## ğŸ¨ ä½¿ç”¨åœºæ™¯

1. **å†…å®¹åˆ›ä½œ** - åœ¨MDXç¼–è¾‘å™¨ä¸­æ’å…¥å›¾ç‰‡
2. **èµ„æºæ•´ç†** - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰åª’ä½“æ–‡ä»¶
3. **å›¾ç‰‡å¤„ç†** - åŸºç¡€çš„å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
4. **æ–‡ä»¶åˆ†äº«** - ç”Ÿæˆå¯è®¿é—®çš„æ–‡ä»¶é“¾æ¥

## ğŸ“ˆ æ‰©å±•å»ºè®®

ç³»ç»Ÿå·²ç»æä¾›äº†å®Œæ•´çš„åŸºç¡€æ¶æ„ï¼Œå¯ä»¥è½»æ¾æ‰©å±•ï¼š

- æ·»åŠ æ›´å¤šæ–‡ä»¶ç±»å‹æ”¯æŒ
- é›†æˆäº‘å­˜å‚¨æœåŠ¡ï¼ˆAWS S3, Cloudinaryï¼‰
- æ·»åŠ å›¾ç‰‡å‹ç¼©å’Œä¼˜åŒ–
- å®ç°æ–‡ä»¶å¤¹åˆ†ç±»ç®¡ç†
- æ·»åŠ æ‰¹é‡æ“ä½œåŠŸèƒ½

## ğŸ‰ å®ŒæˆçŠ¶æ€

âœ… åç«¯èµ„æºç®¡ç†API
âœ… å‰ç«¯èµ„æºç®¡ç†ç•Œé¢  
âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
âœ… å›¾ç‰‡ç¼–è¾‘å™¨
âœ… MDXç¼–è¾‘å™¨é›†æˆ
âœ… å¯¼èˆªèœå•æ›´æ–°
âœ… è·¯ç”±é…ç½®å®Œæˆ

ç°åœ¨ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨å®Œæ•´çš„èµ„æºç®¡ç†ç³»ç»Ÿäº†ï¼